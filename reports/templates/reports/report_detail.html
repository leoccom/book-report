{% extends "base.html" %}

{% block style %}
    .report-meta {
        margin-top: 20px;
        font-size: 0.9em;
        color: #555;
    }
    .report-meta p {
        margin: 5px 0;
    }

    .edit {
        margin-block-start: 1.33em;
        margin-block-end: 1.33em;
    }

    button.like_button {
        border: 1px solid rgb(232, 234, 237);
        background-color: #212121;
        width: 40px;
        height: 40px;
    }
    button.like_button:hover {
        border: 1px solid rgb(232, 234, 237);
        background-color: #424242;
    }
{% endblock %}

{% block title %}
Report Detail
{% endblock %}


{% load custom_filters %}
{% block content %}

<div>
    <div>
        <span style="color: #B7CAD4;">{{ report.user }} â€¢ {{ report.created_at | time_ago }}</span>
        <h4 style="margin-top: 0px;">{{ report.book_title }} - {{ report.book_author }}{% if request.user == report.user %}<a href="{% url 'reports:report-update' report.pk %}" style="margin-left: 5px;"><?xml version="1.0" ?><svg class="feather feather-edit" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></a>{% endif %}</h4>        
    </div>
    <h4>Title: {{ report.title }}</h4>
    <p>Content: {{ report.content }}</p>

    <hr>

    <form method="post" action="{% url 'reports:report-like' report.pk %}">
        {% csrf_token %}
        <button type="submit" class="like_button"><svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="#e8eaed"><path d="M720-144H264v-480l288-288 32 22q17 12 26 30.5t5 38.5l-1 5-38 192h264q30 0 51 21t21 51v57q0 8-1.5 14.5T906-467L786.93-187.8Q778-168 760-156t-40 12Zm-384-72h384l120-279v-57H488l49-243-201 201v378Zm0-378v378-378Zm-72-30v72H120v336h144v72H48v-480h216Z"/></svg></button>
    </form>

    <div>
        <h4 style="margin-block-start: 1em;">Comment</h4>
        {% for comment in report.comments.all %}
        <div>
            <p><strong>{{ comment.user.username }}</strong> ({{ comment.created_at | date:"Y-m-d, g:i a" }})</p>
            <p>{{ comment.content }}</p>
        </div>
        {% empty %}
        <p>No comments yet. Be the first to comment!</p>
        {% endfor %}
    </div>

    <hr>

    <h5>Add a Comment</h4>
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Submit</button>
    </form>
</div>

{% endblock %}