{% extends "base.html" %}

{% block style %}
    .report-meta {
        margin-top: 20px;
        font-size: 0.9em;
        color: #555;
    }
    .report-meta p {
        margin: 5px 0;
    }

    .edit {
        margin-block-start: 1.33em;
        margin-block-end: 1.33em;
    }
{% endblock %}

{% block title %}
Report Detail
{% endblock %}

{% block content %}

<div>
    <div style="display: flex; justify-content: space-between;">
        <h4>{{ report.book_title }} - {{ report.book_author }}{% if request.user == report.user %}<a href="{% url 'reports:report-update' report.pk %}" style="margin-left: 5px;"><?xml version="1.0" ?><svg class="feather feather-edit" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg></a>{% endif %}</h4>        
    </div>
    <h4>Title: {{ report.title }}</h4>
    <p>Content: {{ report.content }}</p>

    <div class="report-meta">
        <p><strong>Written by:</strong> {{ report.user.username }}</p>
        <p><strong>Created at:</strong> {{ report.created_at | date:"Y-m-d"}}</p>
    </div>

    <div style="border-top: 1px;">
        <h4>Comment</h4>
        {% for comment in report.comments.all %}
        <div>
            <p><strong>{{ comment.user.username }}</strong> ({{ comment.created_at | date:"Y-m-d, g:i a" }})</p>
            <p>{{ comment.content }}</p>
        </div>
        {% empty %}
        <p>No comments yet. Be the first to comment!</p>
        {% endfor %}
    </div>

    <hr>

    <h4>Add a Comment</h4>
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Submit</button>
    </form>
</div>

{% endblock %}